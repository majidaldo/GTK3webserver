<!DOCTYPE html> 
<html>

<head>
 <meta charset="utf-8" /> 

 <title>WebSocket Test</title> 

 <script language="javascript" type="text/javascript"> 

function main() {

var wsalive = new WebSocket("ws://localhost:8888/wsalive");
wsalive.onopen = function() {};
wsalive.onmessage = function (evt) {
   var r= confirm("confirm continue in 10 seconds?");
   if (r==false) { wsalive.close() ; }
   else { wsalive.send("pleasedontclose")};
};
wsalive.onclose = function () { alert("disconnected"); };

document.getElementById('foo').onkeypress = function(e){
    if (!e) e = window.event;
    if (e.keyCode == '13'){
      wsalive.send(this.value)///alert(this.value);
      
      return false;
    }
  };

var count=5;
var counter
//=setInterval(timer, 1000);//1000 will run it every 1 second

function timer()
{
  count=count-1;
  if (count <= 0)
  {
     //clearInterval(counter);
	// ctr ended so something here
	//count=5
	document.getElementById("timer").innerHTML="";
     return;
  }
//code for showing
 document.getElementById("timer").innerHTML=count + " secs"; 
};

};

 </script>  

 </head>
 
 <BODY onload="main()"> 
 
<h2>WebSocket Test</h2>
<span id="timer"></span>

  <input id="foo" /> 

</BODY>

<html>
